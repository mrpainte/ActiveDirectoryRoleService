{% extends "base.html" %}

{% block title %}Create Email Template{% endblock %}

{% block content %}
{% include "notifications/_nav.html" with active_tab="templates" %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Create Email Template</h2>
    <a href="{% url 'notifications:template_list' %}" class="btn btn-outline-secondary btn-sm">Back to List</a>
</div>

{% if form.errors %}
<div class="alert alert-danger">Please correct the errors below.</div>
{% endif %}

<form method="post">
    {% csrf_token %}

    <div class="mb-3">
        <label class="form-label">Template Name</label>
        {{ form.name }}
        {% if form.name.errors %}<div class="invalid-feedback d-block">{{ form.name.errors.0 }}</div>{% endif %}
        <div class="form-text">A unique identifier for this template (e.g., <code>team_welcome</code>, <code>maintenance_notice</code>).</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Subject</label>
        {{ form.subject }}
        <div class="form-text">Supports Django template variables: <code>{% verbatim %}{{ domain }}{% endverbatim %}</code>, <code>{% verbatim %}{{ display_name }}{% endverbatim %}</code>, etc.</div>
    </div>

    <div class="mb-3">
        <label class="form-label">HTML Body</label>
        {{ form.body_html }}
        <div class="form-text">Full HTML email body. Use Django template syntax for dynamic content.</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Plain Text Body</label>
        {{ form.body_text }}
        <div class="form-text">Plain text fallback for email clients that don't support HTML.</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Description</label>
        {{ form.description }}
        <div class="form-text">Document the available template variables for this template.</div>
    </div>

    <div class="form-check mb-3">
        <input type="checkbox" name="is_active" class="form-check-input" id="id_is_active" checked>
        <label class="form-check-label" for="id_is_active">Active</label>
    </div>

    <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">Create Template</button>
        <a href="{% url 'notifications:template_list' %}" class="btn btn-outline-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
